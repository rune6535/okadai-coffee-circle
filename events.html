<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« | å²¡å±±å¤§å­¦ çˆç²ã‚µãƒ¼ã‚¯ãƒ«ã€Œã‚†ã’ã€</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;600;700&family=Playfair+Display:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#3E2A1E",
              secondary: "#B98A62",
              accent: "#E3C5A4",
              background: "#F7F2EC",
              textbase: "#231B17",
              muted: "#6D5B4C",
            },
            fontFamily: {
              sans: ["Zen Kaku Gothic New", "sans-serif"],
              display: ["Playfair Display", "serif"],
            },
          },
        },
      };
    </script>
    <style>
      html {
        scroll-behavior: smooth;
      }
      @media (max-width: 640px) {
        html {
          font-size: 15px;
        }
      }
      @media (min-width: 1024px) {
        html {
          font-size: 18px;
        }
      }
      .fade-section {
        opacity: 0;
        transform: translateY(24px);
        transition: opacity 0.4s ease, transform 0.4s ease;
      }
      .fade-section.is-visible {
        opacity: 1;
        transform: translateY(0);
      }
      .hover-lift {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .hover-lift:hover {
        transform: translateY(-6px);
        box-shadow: 0 16px 40px rgba(35, 27, 23, 0.16);
      }
      .hero-reveal {
        opacity: 0;
        transform: translateY(30px);
        animation: heroRise 0.8s ease-out forwards;
      }
      @keyframes heroRise {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @media (prefers-reduced-motion: reduce) {
        .hero-reveal {
          animation: none;
          opacity: 1;
          transform: translateY(0);
        }
      }
      .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 1px;
        background: rgba(62, 42, 30, 0.12);
        border-radius: 16px;
        overflow: hidden;
      }
      .calendar-cell {
        aspect-ratio: 1 / 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding: 8px 4px;
        border: 1px solid #e0e0e0;
        background: white;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
      }
      .calendar-cell.has-event:hover {
        background: #f9f9f9;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .calendar-cell.today {
        background: #fff9f0;
        border-color: #6b4423;
        font-weight: 700;
      }
      .calendar-cell.other-month {
        background: #fafafa;
        opacity: 0.5;
      }
      .date-number {
        font-size: 14px;
        font-weight: 600;
        color: #333;
        margin-bottom: 4px;
      }
      .event-dots {
        display: flex;
        gap: 3px;
        margin-top: auto;
      }
      .event-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        display: block;
      }
      .calendar-fade {
        transition: opacity 0.25s ease;
      }
      .calendar-fade.is-changing {
        opacity: 0.4;
      }
      .calendar-legend {
        margin-top: 24px;
        padding: 20px;
        background: #fafafa;
        border-radius: 12px;
      }
      .legend-title {
        font-size: 14px;
        font-weight: 700;
        color: #666;
        margin-bottom: 12px;
        text-align: center;
      }
      .legend-items {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
      }
      .legend-item:hover {
        background: #f5f5f5;
        transform: translateY(-2px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .legend-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        flex-shrink: 0;
      }
      .legend-label {
        font-size: 13px;
        font-weight: 600;
        color: #333;
      }
      .event-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 10000;
        display: none;
        align-items: center;
        justify-content: center;
      }
      .event-modal.active {
        display: flex;
      }
      .modal-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
      }
      .modal-content {
        position: relative;
        background: white;
        border-radius: 16px;
        padding: 24px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        z-index: 1;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      }
      .modal-close {
        position: absolute;
        top: 16px;
        right: 16px;
        width: 32px;
        height: 32px;
        background: #f5f5f5;
        border: none;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
      }
      .modal-close:hover {
        background: #e0e0e0;
      }
      .modal-date {
        font-size: 20px;
        font-weight: 700;
        color: #2d2424;
        margin: 0 0 20px 0;
      }
      .modal-events {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      .modal-event-item {
        padding: 16px;
        background: #fafafa;
        border-radius: 12px;
        border-left: 4px solid;
      }
      .modal-event-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }
      .modal-event-icon {
        font-size: 20px;
      }
      .modal-event-title {
        font-size: 16px;
        font-weight: 700;
        color: #2d2424;
      }
      .modal-event-time {
        font-size: 13px;
        color: #666;
        margin-bottom: 8px;
      }
      .modal-event-description {
        font-size: 14px;
        color: #666;
        line-height: 1.6;
      }
      @media (max-width: 768px) {
        .legend-items {
          grid-template-columns: 1fr;
        }
        .modal-content {
          width: 95%;
          padding: 20px;
        }
      }
    </style>
    <script src="js/main.js" defer></script>
  </head>
  <body class="bg-background text-textbase font-sans">
    <!-- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav
      id="site-nav"
      class="fixed inset-x-0 top-0 z-50 bg-background/80 text-textbase transition duration-300"
      aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"
    >
      <div class="mx-auto flex max-w-screen-2xl items-center justify-between px-6 py-4">
        <a href="index.html" class="text-lg font-semibold transition hover:text-secondary md:text-xl">
          å²¡å±±å¤§å­¦ çˆç²ã‚µãƒ¼ã‚¯ãƒ«ã€Œã‚†ã’ã€
        </a>
        <div class="hidden items-center gap-8 text-base font-semibold md:flex md:text-lg">
          <a href="index.html" class="text-current hover:text-secondary md:px-2 md:py-1">ãƒ›ãƒ¼ãƒ </a>
          <a href="activities.html" class="text-current hover:text-secondary md:px-2 md:py-1">æ´»å‹•å†…å®¹</a>
          <a href="cafe-map.html" class="text-current hover:text-secondary md:px-2 md:py-1">å²¡å±±ã‚«ãƒ•ã‚§ãƒãƒƒãƒ—</a>
          <a href="members.html" class="text-current hover:text-secondary md:px-2 md:py-1">ãƒ¡ãƒ³ãƒãƒ¼ç´¹ä»‹</a>
          <a href="events.html" class="text-current hover:text-secondary md:px-2 md:py-1">ã‚¤ãƒ™ãƒ³ãƒˆ</a>
          <a
            href="join.html"
            class="rounded-full bg-secondary px-5 py-2.5 text-base text-primary transition hover:bg-accent md:text-lg"
          >
            å…¥ä¼šæ¡ˆå†…
          </a>
        </div>
        <button
          id="menu-toggle"
          class="md:hidden"
          type="button"
          aria-expanded="false"
          aria-controls="mobile-menu"
        >
          <span class="sr-only">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã</span>
          <svg
            class="h-7 w-7"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="M3 6h18" />
            <path d="M3 12h18" />
            <path d="M3 18h18" />
          </svg>
        </button>
      </div>
      <div id="mobile-menu" class="hidden border-t border-primary/20 bg-background/95 text-textbase md:hidden">
        <div class="flex flex-col gap-4 px-6 py-4 text-sm font-semibold">
          <a href="index.html" class="text-current hover:text-secondary md:px-2 md:py-1">ãƒ›ãƒ¼ãƒ </a>
          <a href="activities.html" class="text-current hover:text-secondary md:px-2 md:py-1">æ´»å‹•å†…å®¹</a>
          <a href="cafe-map.html" class="text-current hover:text-secondary md:px-2 md:py-1">å²¡å±±ã‚«ãƒ•ã‚§ãƒãƒƒãƒ—</a>
          <a href="members.html" class="text-current hover:text-secondary md:px-2 md:py-1">ãƒ¡ãƒ³ãƒãƒ¼ç´¹ä»‹</a>
          <a href="events.html" class="text-current hover:text-secondary md:px-2 md:py-1">ã‚¤ãƒ™ãƒ³ãƒˆ</a>
          <a href="join.html" class="text-current hover:text-secondary md:px-2 md:py-1">å…¥ä¼šæ¡ˆå†…</a>
        </div>
      </div>
    </nav>

    <!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="relative pt-24">
      <div class="mx-auto max-w-screen-2xl px-6 py-16 md:py-20">
        <p class="hero-reveal text-xs uppercase tracking-[0.35em] text-secondary" style="animation-delay: 0.2s;">
          Events
        </p>
        <h1 class="hero-reveal mt-4 text-4xl font-semibold text-primary md:text-5xl" style="animation-delay: 0.4s;">
          ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
        </h1>
        <p class="hero-reveal mt-4 text-base text-muted md:text-lg" style="animation-delay: 0.6s;">
          ã‚†ã’ã®æ´»å‹•äºˆå®šã‚’ãƒã‚§ãƒƒã‚¯
        </p>
      </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="mx-auto max-w-screen-2xl px-6 pb-20">
      <section class="rounded-3xl bg-white/80 p-6 shadow md:p-10">
        <div class="grid gap-8 lg:grid-cols-[1.1fr_0.9fr]">
          <div>
            <div class="flex flex-wrap items-center justify-between gap-4">
              <div class="hero-reveal flex items-center gap-3" style="animation-delay: 0.8s;">
                <button
                  type="button"
                  class="rounded-full border border-primary/20 bg-white px-4 py-2 text-sm font-semibold text-primary transition hover:border-secondary"
                  id="prev-month"
                >
                  <i class="fa-solid fa-chevron-left" aria-hidden="true"></i>
                  å‰æœˆ
                </button>
                <h2 id="current-month" class="text-2xl font-semibold text-primary md:text-3xl"></h2>
                <button
                  type="button"
                  class="rounded-full border border-primary/20 bg-white px-4 py-2 text-sm font-semibold text-primary transition hover:border-secondary"
                  id="next-month"
                >
                  æ¬¡æœˆ
                  <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
                </button>
              </div>
              <div class="flex flex-wrap items-center gap-3">
                <div class="hero-reveal flex items-center gap-2" style="animation-delay: 0.8s;">
                  <button
                    type="button"
                    class="view-toggle rounded-full bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-secondary"
                    data-view="calendar"
                  >
                    ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º
                  </button>
                  <button
                    type="button"
                    class="view-toggle rounded-full border border-primary/20 bg-white px-4 py-2 text-sm font-semibold text-primary transition hover:border-secondary"
                    data-view="list"
                  >
                    ãƒªã‚¹ãƒˆè¡¨ç¤º
                  </button>
                </div>
                <div class="hero-reveal flex flex-wrap items-center gap-2" style="animation-delay: 0.8s;">
                  <span class="text-xs font-semibold text-muted">çµã‚Šè¾¼ã¿</span>
                  <button
                    type="button"
                    class="filter-button rounded-full bg-primary px-3 py-1 text-xs font-semibold text-white"
                    data-filter="all"
                  >
                    ã™ã¹ã¦
                  </button>
                  <button type="button" class="filter-button rounded-full bg-white px-3 py-1 text-xs font-semibold text-primary" data-filter="regular">
                    å®šæœŸæ´»å‹•
                  </button>
                </div>
              </div>
            </div>

            <div class="hero-reveal mt-6 calendar-fade" style="animation-delay: 1s;" id="calendar-wrapper">
              <div class="grid grid-cols-7 gap-2 text-center text-xs font-semibold text-muted">
                <span class="text-red-500">æ—¥</span>
                <span>æœˆ</span>
                <span>ç«</span>
                <span>æ°´</span>
                <span>æœ¨</span>
                <span>é‡‘</span>
                <span class="text-blue-500">åœŸ</span>
              </div>
              <div id="calendar-grid" class="calendar-grid mt-3"></div>
              <div class="calendar-legend">
                <div class="legend-title">ã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®é¡</div>
                <div class="legend-items">
                  <div class="legend-item" data-type="regular">
                    <span class="legend-dot" style="background-color: #6b4423;"></span>
                    <span class="legend-label">å®šæœŸæ´»å‹•</span>
                  </div>
                  <div class="legend-item" data-type="cafe-tour">
                    <span class="legend-dot" style="background-color: #e8926f;"></span>
                    <span class="legend-label">ã‚«ãƒ•ã‚§å·¡ã‚Š</span>
                  </div>
                  <div class="legend-item" data-type="event">
                    <span class="legend-dot" style="background-color: #ffb347;"></span>
                    <span class="legend-label">ç‰¹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆ</span>
                  </div>
                  <div class="legend-item" data-type="roasting">
                    <span class="legend-dot" style="background-color: #8b4513;"></span>
                    <span class="legend-label">ç„™ç…è¦‹å­¦</span>
                  </div>
                </div>
              </div>
              <a
                href="#event-details"
                class="mt-4 inline-flex items-center gap-2 text-sm font-semibold text-secondary transition hover:text-primary"
              >
                è©³ç´°ã‚’è¦‹ã‚‹
                <i class="fa-solid fa-arrow-down" aria-hidden="true"></i>
              </a>
            </div>

            <div id="list-view" class="mt-6 hidden"></div>

          </div>

          <div id="event-details" class="rounded-3xl bg-background/60 p-6 md:p-8">
            <div class="hero-reveal" style="animation-delay: 1.4s;">
              <h2 class="text-2xl font-semibold text-primary md:text-3xl">ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°</h2>
              <p class="mt-2 text-sm text-muted">æ°—ã«ãªã‚‹æ—¥ä»˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°ã‚’ãƒã‚§ãƒƒã‚¯ã§ãã¾ã™ã€‚</p>
            </div>
            <div class="mt-6 grid gap-6 md:grid-cols-2" id="event-cards" data-stagger></div>
          </div>
        </div>
      </section>

      <div class="event-modal" id="event-modal">
        <div class="modal-overlay" id="modal-overlay"></div>
        <div class="modal-content">
          <button class="modal-close" id="modal-close" type="button">Ã—</button>
          <h3 class="modal-date" id="modal-date"></h3>
          <div class="modal-events" id="modal-events"></div>
        </div>
      </div>

      <section class="fade-section mt-16">
        <div class="rounded-3xl bg-primary px-8 py-12 text-white md:px-12">
          <div class="grid gap-8 md:grid-cols-[1.2fr_0.8fr] md:items-center">
            <div>
              <h2 class="text-2xl font-semibold md:text-3xl">ã‚¤ãƒ™ãƒ³ãƒˆã¯éšæ™‚è¿½åŠ ã•ã‚Œã¾ã™ï¼</h2>
              <p class="mt-4 text-sm text-white/80 md:text-base">
                æœ€æ–°æƒ…å ±ã¯Instagramã§ãŠçŸ¥ã‚‰ã›ã—ã¦ã„ã¾ã™ã€‚ã‚†ã’ã®æ´»å‹•ã‚’ä¸€ç·’ã«è¿½ã„ã‹ã‘ã¾ã—ã‚‡ã†ï¼
              </p>
            </div>
            <div class="flex flex-col gap-3 md:items-end">
              <a
                href="https://www.instagram.com/okadai_coffee_circle/"
                class="hover-lift inline-flex items-center gap-2 rounded-full bg-secondary px-8 py-3 text-sm font-semibold text-primary shadow-lg transition hover:bg-accent"
                target="_blank"
                rel="noreferrer"
              >
                <i class="fa-brands fa-instagram" aria-hidden="true"></i>
                Instagramã‚’è¦‹ã‚‹
              </a>
              <button
                type="button"
                class="inline-flex items-center gap-2 rounded-full border border-white/40 px-8 py-3 text-sm font-semibold text-white/90 transition hover:border-white"
                aria-label="Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ "
              >
                <i class="fa-regular fa-calendar" aria-hidden="true"></i>
                ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ï¼ˆæº–å‚™ä¸­ï¼‰
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="bg-primary text-white">
      <div class="mx-auto flex max-w-screen-2xl flex-col gap-6 px-6 py-12 md:flex-row md:items-center md:justify-between">
        <div>
          <p class="text-lg font-semibold">å²¡å±±å¤§å­¦ çˆç²ã‚µãƒ¼ã‚¯ãƒ«ã€Œã‚†ã’ã€</p>
          <p class="mt-2 text-sm text-white/80">
            æ¸©ã‹ã•ã¨æ´»æ°—ãŒåºƒãŒã‚‹å ´æ‰€ã§ã€ã‚³ãƒ¼ãƒ’ãƒ¼ã®æ™‚é–“ã‚’ä¸€ç·’ã«æ¥½ã—ã¿ã¾ã›ã‚“ã‹ã€‚
          </p>
        </div>
        <div class="flex flex-col gap-4 text-sm">
          <a
            href="https://www.instagram.com/okadai_coffee_circle/"
            class="inline-flex items-center gap-2 font-semibold text-secondary hover:text-accent"
            aria-label="Instagram"
            target="_blank"
            rel="noreferrer"
          >
            <i class="fa-brands fa-instagram" aria-hidden="true"></i>
            Instagram
          </a>
          <a href="join.html" class="font-semibold text-white/80 hover:text-accent">
            ãŠå•ã„åˆã‚ã›ã¯ã“ã¡ã‚‰
          </a>
        </div>
      </div>
      <div class="border-t border-white/20 py-4 text-center text-xs text-white/70">
        Â© 2025 å²¡å±±å¤§å­¦ çˆç²ã‚µãƒ¼ã‚¯ãƒ«ã€Œã‚†ã’ã€
      </div>
    </footer>

    <button
      id="back-to-top"
      class="fixed bottom-6 right-6 rounded-full bg-secondary px-4 py-3 text-sm font-semibold text-primary shadow-lg opacity-0 pointer-events-none transition hover:bg-accent"
      type="button"
      aria-label="ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹"
    >
      â†‘ Top
    </button>

    <script>
      const nav = document.getElementById("site-nav");
      const menuToggle = document.getElementById("menu-toggle");
      const mobileMenu = document.getElementById("mobile-menu");

      const setNavStyle = () => {
        if (window.scrollY > 10) {
          nav.classList.add("bg-background/95", "shadow-lg", "backdrop-blur");
        } else {
          nav.classList.remove("bg-background/95", "shadow-lg", "backdrop-blur");
        }
      };

      menuToggle.addEventListener("click", () => {
        const isOpen = mobileMenu.classList.toggle("hidden") === false;
        menuToggle.setAttribute("aria-expanded", isOpen);
      });

      window.addEventListener("scroll", setNavStyle);
      window.addEventListener("load", setNavStyle);

      const eventTypes = {
        regular: {
          label: "å®šæœŸæ´»å‹•",
          color: "#6B4423",
          icon: "â˜•",
          badge: "bg-[#6B4423] text-white transition hover:bg-[#5B3A1E]",
        },
        "cafe-tour": {
          label: "ã‚«ãƒ•ã‚§å·¡ã‚Š",
          color: "#E8926F",
          icon: "ğŸš¶",
          badge: "bg-[#E8926F] text-white transition hover:bg-[#D98460]",
        },
        event: {
          label: "ç‰¹åˆ¥ã‚¤ãƒ™ãƒ³ãƒˆ",
          color: "#FFB347",
          icon: "ğŸ‰",
          badge: "bg-[#FFB347] text-primary transition hover:bg-[#F0A53D]",
        },
        roasting: {
          label: "ç„™ç…è¦‹å­¦",
          color: "#8B4513",
          icon: "ğŸ”¥",
          badge: "bg-[#8B4513] text-white transition hover:bg-[#7A3D11]",
        },
      };

      const events = [
        {
          date: "2026-01-15",
          title: "æ–°å¹´ã‚«ãƒ•ã‚§å·¡ã‚Š",
          type: "cafe-tour",
          description: "2026å¹´æœ€åˆã®ã‚«ãƒ•ã‚§å·¡ã‚Šï¼æ–°ã—ã„ãŠåº—ã‚’é–‹æ‹“ã—ã¾ã™ã€‚",
          location: "å²¡å±±å¸‚å†…",
          time: "13:00ã€œ16:00",
          signup: "å‚åŠ å¸Œæœ›ã¯LINEã¾ãŸã¯Instagramã®DMã§ã”é€£çµ¡ãã ã•ã„ã€‚",
          image: "images/coming-soon.svg",
        },
        {
          date: "2026-02-13",
          type: "regular",
          title: "å®šæœŸæ´»å‹•",
          time: "18:00ã€œ20:00",
          location: "å²¡å±±å¤§å­¦ã€‡ã€‡æ£Ÿ",
          description:
            "ã‚†ã’ã®å®šä¾‹ä¼šã§ã™ã€‚ã‚³ãƒ¼ãƒ’ãƒ¼ã®æŠ½å‡ºã‚„äº¤æµã‚’ä¸­å¿ƒã«ã€æ°—è»½ã«å‚åŠ ã§ãã¾ã™ã€‚",
          signup: "å‚åŠ å¸Œæœ›ã¯LINEã¾ãŸã¯Instagramã®DMã§ã”é€£çµ¡ãã ã•ã„ã€‚",
          image: "images/coming-soon.svg",
        },
        {
          date: "2026-02-20",
          title: "ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ã‚³ãƒ¼ãƒ’ãƒ¼ä¼š",
          type: "event",
          description: "ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã¨ã‚³ãƒ¼ãƒ’ãƒ¼ã®ãƒšã‚¢ãƒªãƒ³ã‚°ã‚’æ¥½ã—ã‚‚ã†ï¼",
          location: "ã‚µãƒ¼ã‚¯ãƒ«å®¤",
          time: "18:00ã€œ20:00",
          signup: "å‚åŠ å¸Œæœ›ã¯LINEã¾ãŸã¯Instagramã®DMã§ã”é€£çµ¡ãã ã•ã„ã€‚",
          image: "images/coming-soon.svg",
        },
        {
          date: "2026-03-05",
          title: "ãƒ­ãƒ¼ã‚¹ã‚¿ãƒªãƒ¼è¦‹å­¦ä¼š",
          type: "roasting",
          description: "ç„™ç…ã®ç¾å ´ã‚’è¦‹å­¦ã—ã€è±†ã®å¥¥æ·±ã•ã‚’å­¦ã³ã¾ã™ã€‚",
          location: "å²¡å±±å¸‚å†…ãƒ­ãƒ¼ã‚¹ã‚¿ãƒªãƒ¼",
          time: "14:00ã€œ16:00",
          signup: "å‚åŠ å¸Œæœ›ã¯LINEã¾ãŸã¯Instagramã®DMã§ã”é€£çµ¡ãã ã•ã„ã€‚",
          image: "images/coming-soon.svg",
        },
      ];

      const calendarGrid = document.getElementById("calendar-grid");
      const currentMonthLabel = document.getElementById("current-month");
      const calendarWrapper = document.getElementById("calendar-wrapper");
      const listView = document.getElementById("list-view");
      const eventCards = document.getElementById("event-cards");

      let currentMonth = new Date(2026, 0, 1);
      let activeFilter = "all";
      let activeView = "calendar";

      const formatMonth = (date) => `${date.getFullYear()}å¹´ ${date.getMonth() + 1}æœˆ`;
      const formatDateLabel = (date) =>
        `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;

      const toDateKey = (date) => date.toISOString().split("T")[0];

      const getEventsForDate = (dateKey) =>
        events.filter((event) => event.date === dateKey && (activeFilter === "all" || event.type === activeFilter));

      const formatDate = (dateString) => {
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const weekdays = ["æ—¥", "æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ"];
        const weekday = weekdays[date.getDay()];
        return `${year}å¹´${month}æœˆ${day}æ—¥ï¼ˆ${weekday}ï¼‰`;
      };

      const closeEventModal = () => {
        const modal = document.getElementById("event-modal");
        if (modal) {
          modal.classList.remove("active");
        }
      };

      const showEventsByType = (eventType) => {
        const typeInfo = eventTypes[eventType];
        const filteredEvents = events.filter((event) => event.type === eventType);
        if (!filteredEvents.length) {
          window.alert(`${typeInfo.label}ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ç¾åœ¨äºˆå®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚`);
          return;
        }
        const modal = document.getElementById("event-modal");
        const modalDate = document.getElementById("modal-date");
        const modalEvents = document.getElementById("modal-events");
        if (!modal || !modalDate || !modalEvents) {
          return;
        }
        modalDate.textContent = `${typeInfo.icon} ${typeInfo.label}`;
        modalEvents.innerHTML = filteredEvents
          .map(
            (event) => `
            <div class="modal-event-item" style="border-left-color: ${typeInfo.color};">
              <div class="modal-event-header">
                <span class="modal-event-icon">${typeInfo.icon}</span>
                <span class="modal-event-title">${event.title}</span>
              </div>
              <div class="modal-event-time">ğŸ“… ${formatDate(event.date)}${
              event.time ? ` | ğŸ• ${event.time}` : ""
            }</div>
              ${event.location ? `<div class="modal-event-time">ğŸ“ ${event.location}</div>` : ""}
              <div class="modal-event-description">${event.description}</div>
            </div>
          `
          )
          .join("");
        modal.classList.add("active");
      };

      const showEventDetails = (date, dayEvents) => {
        const modal = document.getElementById("event-modal");
        const modalDate = document.getElementById("modal-date");
        const modalEvents = document.getElementById("modal-events");
        if (!modal || !modalDate || !modalEvents) {
          return;
        }
        modalDate.textContent = formatDate(toDateKey(date));
        modalEvents.innerHTML = dayEvents
          .map((event) => {
            const typeInfo = eventTypes[event.type];
            return `
            <div class="modal-event-item" style="border-left-color: ${typeInfo.color};">
              <div class="modal-event-header">
                <span class="modal-event-icon">${typeInfo.icon}</span>
                <span class="modal-event-title">${event.title}</span>
              </div>
              ${event.time ? `<div class="modal-event-time">ğŸ• ${event.time}</div>` : ""}
              ${event.location ? `<div class="modal-event-time">ğŸ“ ${event.location}</div>` : ""}
              <div class="modal-event-description">${event.description}</div>
            </div>
          `;
          })
          .join("");
        modal.classList.add("active");
      };

      const createCalendarCell = (date, isCurrentMonth, dayEvents) => {
        const cell = document.createElement("div");
        cell.className = "calendar-cell";
        if (!isCurrentMonth) {
          cell.classList.add("other-month");
          return cell;
        }

        const today = new Date();
        if (date.toDateString() === today.toDateString()) {
          cell.classList.add("today");
        }

        const dateNumber = document.createElement("div");
        dateNumber.className = "date-number";
        dateNumber.textContent = date.getDate();
        cell.appendChild(dateNumber);

        if (dayEvents.length > 0) {
          const eventDots = document.createElement("div");
          eventDots.className = "event-dots";
          dayEvents.slice(0, 3).forEach((event) => {
            const dot = document.createElement("span");
            dot.className = "event-dot";
            dot.style.backgroundColor = eventTypes[event.type].color;
            dot.setAttribute("data-event-type", event.type);
            eventDots.appendChild(dot);
          });
          cell.appendChild(eventDots);
          cell.classList.add("has-event");
          cell.addEventListener("click", () => showEventDetails(date, dayEvents));
        }

        return cell;
      };

      const renderCalendar = () => {
        calendarWrapper.classList.add("is-changing");
        setTimeout(() => calendarWrapper.classList.remove("is-changing"), 200);

        currentMonthLabel.textContent = formatMonth(currentMonth);
        calendarGrid.innerHTML = "";

        const year = currentMonth.getFullYear();
        const month = currentMonth.getMonth();
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const totalCells = Math.ceil((firstDay + daysInMonth) / 7) * 7;

        for (let i = 0; i < totalCells; i += 1) {
          const dayNumber = i - firstDay + 1;
          if (dayNumber > 0 && dayNumber <= daysInMonth) {
            const date = new Date(year, month, dayNumber);
            const dateKey = toDateKey(date);
            const dayEvents = getEventsForDate(dateKey);
            calendarGrid.appendChild(createCalendarCell(date, true, dayEvents));
          } else {
            calendarGrid.appendChild(createCalendarCell(new Date(year, month, 1), false, []));
          }
        }
      };

      const renderEventCards = () => {
        eventCards.innerHTML = "";
        const sortedEvents = [...events].sort((a, b) => a.date.localeCompare(b.date));
        const filteredEvents = sortedEvents.filter(
          (event) => activeFilter === "all" || event.type === activeFilter
        );
        const firstMonthKey = filteredEvents.length ? filteredEvents[0].date.slice(0, 7) : "";
        let initialCardIndex = 0;
        let staggerIndex = 0;

        filteredEvents.forEach((event) => {
          const date = new Date(event.date);
          const card = document.createElement("article");
          const isFirstMonth = event.date.startsWith(firstMonthKey);
          if (isFirstMonth) {
            card.className = "hero-reveal hover-lift rounded-3xl bg-background/70 p-6 shadow";
            card.style.animationDelay = `${(1.6 + initialCardIndex * 0.1).toFixed(1)}s`;
            initialCardIndex += 1;
          } else {
            card.className = "stagger-item fade-section hover-lift rounded-3xl bg-background/70 p-6 shadow";
            card.style.transitionDelay = `${(staggerIndex * 0.1).toFixed(1)}s`;
            staggerIndex += 1;
          }
          card.id = `event-${event.date}`;
          card.dataset.type = event.type;

          card.innerHTML = `
            <div class="flex items-start justify-between">
              <div>
                <p class="text-lg font-semibold text-primary">${formatDateLabel(date)}</p>
                <p class="mt-1 text-sm font-semibold text-muted">${event.title}</p>
              </div>
              <span class="rounded-full px-3 py-1 text-xs font-semibold ${eventTypes[event.type].badge}">
                ${eventTypes[event.type].label}
              </span>
            </div>
            <div class="mt-4 space-y-2 text-sm text-muted">
              <p class="flex items-center gap-2"><i class="fa-regular fa-clock" aria-hidden="true"></i>${event.time}</p>
              <p class="flex items-center gap-2"><i class="fa-solid fa-location-dot" aria-hidden="true"></i>${event.location}</p>
            </div>
            <p class="mt-4 text-sm leading-6 text-muted">${event.description}</p>
            <p class="mt-4 text-sm font-semibold text-primary">å‚åŠ æ–¹æ³•ï¼š<span class="text-muted">${event.signup}</span></p>
            <div class="mt-4 overflow-hidden rounded-2xl">
              <img
                src="${event.image}"
                alt="${event.title}ã®ã‚¤ãƒ¡ãƒ¼ã‚¸"
                loading="lazy"
                decoding="async"
                class="h-40 w-full object-cover"
               
              />
            </div>
          `;

          eventCards.appendChild(card);
        });
      };

      const cardObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible");
              cardObserver.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.2 }
      );

      const observeEventCards = () => {
        eventCards.querySelectorAll(".fade-section").forEach((card) => {
          cardObserver.observe(card);
        });
      };

      const renderListView = () => {
        listView.innerHTML = "";
        const list = document.createElement("div");
        list.className = "space-y-3";

        const sortedEvents = [...events].sort((a, b) => a.date.localeCompare(b.date));
        sortedEvents.forEach((event) => {
          if (activeFilter !== "all" && event.type !== activeFilter) {
            return;
          }
          const date = new Date(event.date);
          const item = document.createElement("button");
          item.type = "button";
          item.className = "flex w-full items-center justify-between rounded-2xl bg-background/70 px-4 py-3 text-left text-sm transition hover:bg-background";
          item.innerHTML = `
            <div>
              <p class="font-semibold text-primary">${formatDateLabel(date)}</p>
              <p class="text-muted">${event.title}</p>
            </div>
            <span class="rounded-full px-3 py-1 text-xs font-semibold ${eventTypes[event.type].badge}">
              ${eventTypes[event.type].label}
            </span>
          `;
          item.addEventListener("click", () => {
            const target = document.getElementById(`event-${event.date}`);
            if (target) {
              target.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          });
          list.appendChild(item);
        });

        listView.appendChild(list);
      };

      const syncView = () => {
        if (activeView === "calendar") {
          calendarWrapper.classList.remove("hidden");
          listView.classList.add("hidden");
        } else {
          calendarWrapper.classList.add("hidden");
          listView.classList.remove("hidden");
        }
      };

      const updateFilterButtons = () => {
        document.querySelectorAll(".filter-button").forEach((button) => {
          const isActive = button.dataset.filter === activeFilter;
          button.classList.toggle("bg-primary", isActive);
          button.classList.toggle("text-white", isActive);
          button.classList.toggle("bg-white", !isActive);
          button.classList.toggle("text-primary", !isActive);
        });
      };

      const updateViewButtons = () => {
        document.querySelectorAll(".view-toggle").forEach((button) => {
          const isActive = button.dataset.view === activeView;
          button.classList.toggle("bg-primary", isActive);
          button.classList.toggle("text-white", isActive);
          button.classList.toggle("border", !isActive);
          button.classList.toggle("border-primary/20", !isActive);
          button.classList.toggle("bg-white", !isActive);
          button.classList.toggle("text-primary", !isActive);
        });
      };

      document.getElementById("prev-month").addEventListener("click", () => {
        currentMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1);
        renderCalendar();
      });

      document.getElementById("next-month").addEventListener("click", () => {
        currentMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1);
        renderCalendar();
      });

      document.querySelectorAll(".filter-button").forEach((button) => {
        button.addEventListener("click", () => {
          activeFilter = button.dataset.filter || "all";
          updateFilterButtons();
          renderCalendar();
          renderEventCards();
          observeEventCards();
          renderListView();
        });
      });

      document.querySelectorAll(".view-toggle").forEach((button) => {
        button.addEventListener("click", () => {
          activeView = button.dataset.view || "calendar";
          updateViewButtons();
          syncView();
        });
      });

      document.querySelectorAll(".legend-item").forEach((item) => {
        item.addEventListener("click", () => {
          const eventType = item.getAttribute("data-type");
          if (eventType) {
            showEventsByType(eventType);
          }
        });
      });

      const modalClose = document.getElementById("modal-close");
      const modalOverlay = document.getElementById("modal-overlay");
      if (modalClose) {
        modalClose.addEventListener("click", closeEventModal);
      }
      if (modalOverlay) {
        modalOverlay.addEventListener("click", closeEventModal);
      }

      renderCalendar();
      renderEventCards();
      observeEventCards();
      renderListView();
      updateFilterButtons();
      updateViewButtons();
      syncView();
    </script>
  </body>
</html>
